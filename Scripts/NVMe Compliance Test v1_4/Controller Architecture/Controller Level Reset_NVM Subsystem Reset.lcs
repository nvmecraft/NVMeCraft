// Not Completed.

NVMeDevice dev;
Serilog.Core.Logger log;

public int ScriptMain(int a, int b)
{
    dev = FromEngine.dev;
    log = FromEngine.log;
    
    log.Information("NVM Subsystem Reset - CHECK");
    
    UInt64 CAP_NSSRS = dev.controllerRegs.CAP.NSSRS;
    if(CAP_NSSRS == 1)
    {
        log.Information("The controller supports the NVM Subsystem Reset feature.");
    }
    else
    {
        log.Information("The controller does not support the NVM Subsystem Reset feature.");
        
        log.Information("NVM Subsystem Reset - END");
        return 0;
    }
    
    UInt32 CSTS_NSSRO = dev.controllerRegs.CSTS.NSSRO;
    if(CSTS_NSSRO != 0)
    {
        log.Information("Perform a power cycle of the DUT and restart the test.");
    }
    
    dev.controllerRegs.NSSR.NSSRC = 0x4E564D65; //"NVMe"
    
    
    PassOrFail();
    
    
    log.Information("NVM Subsystem Reset - END");
    return 0;
}

public void PassOrFail()
{
    log.Information("CAP.DSTRD - END");
}